BEGIN TRANSACTION;
CREATE TABLE IF NOT EXISTS "DichVu" (
	"ID"	TEXT NOT NULL,
	"TenDichVu"	TEXT NOT NULL,
	"GiaDichVu"	TEXT NOT NULL,
	"LoaiHinhThanhToan"	TEXT CHECK("LoaiHinhThanhToan" IN ('Miễn phí/không sử dụng', 'Theo phòng', 'Theo đầu người', 'Theo đồng hồ')),
	"MaKhuTro"	TEXT,
	"MaPhong"	TEXT,
	PRIMARY KEY("ID"),
	FOREIGN KEY("MaKhuTro") REFERENCES "KhuTro"("ID") ON DELETE SET NULL,
	FOREIGN KEY("MaPhong") REFERENCES "Phong"("ID") ON DELETE SET NULL
);
CREATE TABLE IF NOT EXISTS "HoaDon" (
	"ID"	TEXT NOT NULL,
	"Ten"	TEXT,
	"NgayTao"	TEXT,
	"GiaThue"	REAL NOT NULL,
	"SONUOC"	INTEGER,
	"SoNuocTieuThu"	INTEGER,
	"SODIEN"	INTEGER,
	"SoDienTieuThu"	INTEGER,
	"GiaDichVu"	TEXT,
	"TienMienGiam"	TEXT DEFAULT 0,
	"TongTien"	TEXT,
	"TrangThai"	INTEGER,
	"MaPhong"	TEXT,
	"Thang"	INTEGER NOT NULL CHECK("Thang" BETWEEN 1 AND 12),
	"Nam"	INTEGER NOT NULL,
	"GhiChu"	TEXT,
	PRIMARY KEY("ID"),
	FOREIGN KEY("MaPhong") REFERENCES "Phong"("ID") ON DELETE SET NULL
);
CREATE TABLE IF NOT EXISTS "HopDong" (
	"ID"	TEXT NOT NULL,
	"ThoiHan"	INTEGER,
	"Ten"	TEXT,
	"NgayLapHopDong"	TEXT,
	"NgayBatDau"	TEXT,
	"NgayKetThuc"	TEXT,
	"TienCoc"	TEXT,
	"TrangThai"	INTEGER,
	"HieuLuc"	INTEGER,
	"MaPhong"	TEXT,
	"MaKhach"	TEXT,
	"GhiChu"	TEXT,
	PRIMARY KEY("ID"),
	FOREIGN KEY("MaKhach") REFERENCES "NguoiThue"("ID") ON DELETE SET NULL,
	FOREIGN KEY("MaPhong") REFERENCES "Phong"("ID") ON DELETE SET NULL
);
CREATE TABLE IF NOT EXISTS "KhieuNai" (
	"ID"	TEXT NOT NULL,
	"TieuDe"	TEXT NOT NULL,
	"NoiDung"	TEXT,
	"NgayTao"	TEXT,
	"NguoiNop"	TEXT,
	"MaPhong"	TEXT,
	"TrangThai"	TEXT CHECK("TrangThai" IN ('Mới', 'Đang xử lý', 'Đã xử lý', 'Từ chối')),
	"KieuKhieuNai"	INTEGER,
	PRIMARY KEY("ID"),
	FOREIGN KEY("MaPhong") REFERENCES "Phong"("ID") ON DELETE SET NULL,
	FOREIGN KEY("NguoiNop") REFERENCES "NguoiThue"("ID") ON DELETE SET NULL
);
CREATE TABLE IF NOT EXISTS "KhuTro" (
	"ID"	TEXT NOT NULL,
	"TenKhuTro"	TEXT NOT NULL,
	"DiaChi"	TEXT NOT NULL,
	"SoLuongPhong"	INTEGER,
	"MaChuNha"	TEXT,
	"TrangThai"	INTEGER DEFAULT 1,
	"MoTa"	TEXT,
	PRIMARY KEY("ID"),
	FOREIGN KEY("MaChuNha") REFERENCES "NguoiDung"("ID") ON DELETE SET NULL
);
CREATE TABLE IF NOT EXISTS "NguoiDung" (
	"ID"	TEXT NOT NULL,
	"TenDangNhap"	TEXT NOT NULL UNIQUE,
	"MatKhau"	TEXT NOT NULL,
	"HoTen"	TEXT NOT NULL,
	"NgaySinh"	TEXT,
	"SoDienThoai"	TEXT,
	"Email"	TEXT,
	"TrangThai"	INTEGER DEFAULT 1,
	PRIMARY KEY("ID")
);
CREATE TABLE IF NOT EXISTS "NguoiThue" (
	"ID"	TEXT NOT NULL,
	"HoTen"	TEXT NOT NULL,
	"CCCD"	TEXT,
	"QueQuan"	TEXT,
	"NgaySinh"	TEXT,
	"SoDienThoai"	TEXT,
	"TrangThai"	TEXT CHECK("TrangThai" IN ('Đang thuê', 'Đã rời đi', 'Tạm vắng')),
	"MaPhong"	TEXT,
	"TenDangNhap"	TEXT NOT NULL,
	"MatKhau"	TEXT NOT NULL,
	PRIMARY KEY("ID"),
	FOREIGN KEY("MaPhong") REFERENCES "Phong"("ID") ON DELETE SET NULL
);
CREATE TABLE IF NOT EXISTS "Phong" (
	"ID"	TEXT NOT NULL,
	"TenPhong"	TEXT NOT NULL,
	"SoNguoiToiDa"	INTEGER,
	"DienTich"	REAL,
	"GiaThue"	TEXT NOT NULL,
	"DichVu"	TEXT,
	"TrangThai"	TEXT CHECK("TrangThai" IN ('Trống', 'Đã thuê', 'Đang sửa chữa', 'Đặt cọc')),
	"MaKhuTro"	TEXT,
	PRIMARY KEY("ID"),
	FOREIGN KEY("MaKhuTro") REFERENCES "KhuTro"("ID") ON DELETE SET NULL
);
CREATE TABLE IF NOT EXISTS "QuyDinh" (
	"ID"	TEXT NOT NULL,
	"TieuDe"	TEXT NOT NULL,
	"NoiDung"	TEXT,
	"NgayTao"	TEXT,
	"MaKhuTro"	TEXT,
	"TrangThai"	INTEGER DEFAULT 1,
	PRIMARY KEY("ID"),
	FOREIGN KEY("MaKhuTro") REFERENCES "KhuTro"("ID") ON DELETE SET NULL
);
CREATE TABLE IF NOT EXISTS "ThongBao" (
	"ID"	TEXT NOT NULL,
	"TieuDe"	TEXT NOT NULL,
	"NoiDung"	TEXT,
	"NgayTao"	TEXT,
	"MaKhuTro"	TEXT,
	"MaPhong"	TEXT,
	"DaDoc"	INTEGER DEFAULT 0,
	PRIMARY KEY("ID"),
	FOREIGN KEY("MaKhuTro") REFERENCES "KhuTro"("ID") ON DELETE SET NULL,
	FOREIGN KEY("MaPhong") REFERENCES "Phong"("ID") ON DELETE SET NULL
);
INSERT INTO "DichVu" ("ID","TenDichVu","GiaDichVu","LoaiHinhThanhToan","MaKhuTro","MaPhong") VALUES ('87C00CC2711F3E7CA0FD50494757D0D3','Dich vu WiFi','200000','Theo phòng','081D5D2E802921846FE71CC7F41BB496','472A9121AFDBDBF23B15D3C778332BBF'),
 ('68FB7600C033C0B6F2B2D568BB604B37','Dich vu Ve sinh','100000','Theo đầu người','1545D78BD219EEF76CB04B495DCA2CC6',NULL),
 ('B3B25D7BBEF95239DEAD51D06BCCC0B6','Dich vu Truyền hình','150000','Theo phòng','E85A7554703CC399BBB839FB6496EB4B',NULL),
 ('FEEABBC13C18ED919FA06CAFFA281540','Dich vu Giu xe','50000','Theo đầu người','D6FFB74F0981DDCB18950D28F0339EA2',NULL),
 ('19B6A225B00460C0ACD47FB64C245B81','Dich vu Nuoc','30000','Theo đồng hồ','081D5D2E802921846FE71CC7F41BB496','472A9121AFDBDBF23B15D3C778332BBF'),
 ('B691D8C8EB0487D5607EFDC427B0444A','Dich vu Dien','50000','Theo đồng hồ','081D5D2E802921846FE71CC7F41BB496','472A9121AFDBDBF23B15D3C778332BBF');
INSERT INTO "HoaDon" ("ID","Ten","NgayTao","GiaThue","SONUOC","SoNuocTieuThu","SODIEN","SoDienTieuThu","GiaDichVu","TienMienGiam","TongTien","TrangThai","MaPhong","Thang","Nam","GhiChu") VALUES ('50AD585705187B48900219F47525D5D6','Dich vu phong 1','2023-01-01',3000000.0,10,10,100,100,NULL,'0',NULL,0,'472A9121AFDBDBF23B15D3C778332BBF',1,2023,'Ghi chú 1'),
 ('049B0D46086F478C0008DDD15D5C9DD0','Dich vu phong 2','2023-02-01',4000000.0,15,15,150,150,NULL,'0',NULL,1,'61DE95DF73EEF4B7C0F19F9FF49BB707',2,2023,'Ghi chú 2');
INSERT INTO "HopDong" ("ID","ThoiHan", "Ten","NgayLapHopDong","NgayBatDau","NgayKetThuc","TienCoc","TrangThai","HieuLuc","MaPhong","MaKhach","GhiChu") VALUES ('AED8093BBE849C5AA49C900148EA8E36',12,'Phong 1','2025-01-01','2025-02-01','2026-01-31','5000000',1,1,'472A9121AFDBDBF23B15D3C778332BBF','776361F08BC4EA1984DCCFF869332FB3','Hợp đồng 1'),
 ('6B57DF7F1A58CFDBE9B56E6F7B5EFAB2',6,'Phong 2','2025-01-15','2025-02-15','2025-08-14','3000000',1,1,'61DE95DF73EEF4B7C0F19F9FF49BB707','EBFF48CF61E0EBAEDE3E4EB9C21CFC29','Hợp đồng 2'),
 ('B4905F7D20D594FB54B3283807A24EF1',24,'Phong 3','2025-01-20','2025-02-20','2027-02-19','1000000',1,1,'53BBFAA6EF5163CF02DB9AB4A82D660A','B3CD8EE2B3FAAF6043078A17CFF88B44','Hợp đồng 3');
INSERT INTO "KhieuNai" ("ID","TieuDe","NoiDung","NgayTao","NguoiNop","MaPhong","TrangThai","KieuKhieuNai") VALUES ('6AA76D38AF74E86777B8314A1C200468','Khiếu nại 1','Nội dung khiếu nại 1','2023-01-01 10:00:00','776361F08BC4EA1984DCCFF869332FB3','472A9121AFDBDBF23B15D3C778332BBF','Mới', 0),
 ('6640A9A9277195EB0479C4C25BC90E6F','Khiếu nại 2','Nội dung khiếu nại 2','2023-02-01 11:00:00','EBFF48CF61E0EBAEDE3E4EB9C21CFC29','61DE95DF73EEF4B7C0F19F9FF49BB707','Đang xử lý', 0);
INSERT INTO "KhuTro" ("ID","TenKhuTro","DiaChi","SoLuongPhong","MaChuNha","TrangThai","MoTa") VALUES ('081D5D2E802921846FE71CC7F41BB496','Khu Tro A','Dia Chi A',10,'78E049A38ECC923A6C259298F2D0F4A5',1,'Mo ta khu tro A'),
 ('1545D78BD219EEF76CB04B495DCA2CC6','Khu Tro B','Dia Chi B',15,'F9C3D549D26510E5890ACCFEC2D555CD',1,'Mo ta khu tro B'),
 ('E85A7554703CC399BBB839FB6496EB4B','Khu Tro C','Dia Chi C',20,'021B29F90C80605C7920F90DC0C73CF4',1,'Mo ta khu tro C'),
 ('D6FFB74F0981DDCB18950D28F0339EA2','Khu Tro D','Dia Chi D',25,'F49E697CF98EA0C2A29AD0D8998184C5',1,'Mo ta khu tro D'),
 ('A7599DAEE2CF8F99B29D9A4A6939A37C','Khu Tro E','Dia Chi E',30,'0D1A08A328F67157F28A0C27BD40417E',1,'Mo ta khu tro E');
INSERT INTO "NguoiDung" ("ID","TenDangNhap","MatKhau","HoTen","NgaySinh","SoDienThoai","Email","TrangThai") VALUES ('78E049A38ECC923A6C259298F2D0F4A5','chutro1','matkhau1','Nguyen Van A','1980-01-01','0123456789','chutro1@example.com',1),
 ('F9C3D549D26510E5890ACCFEC2D555CD','chutro2','matkhau2','Tran Thi B','1982-02-02','0123456790','chutro2@example.com',1),
 ('021B29F90C80605C7920F90DC0C73CF4','chutro3','matkhau3','Le Van C','1985-03-03','0123456791','chutro3@example.com',1),
 ('F49E697CF98EA0C2A29AD0D8998184C5','chutro4','matkhau4','Pham Thi D','1987-04-04','0123456792','chutro4@example.com',1),
 ('0D1A08A328F67157F28A0C27BD40417E','chutro5','matkhau5','Hoang Van E','1990-05-05','0123456793','chutro5@example.com',1);
INSERT INTO "NguoiThue" ("ID","HoTen","CCCD","QueQuan","NgaySinh","SoDienThoai","TrangThai","MaPhong","TenDangNhap","MatKhau") VALUES ('776361F08BC4EA1984DCCFF869332FB3','Nguyen Van B','123456789012','Ha Noi','1995-05-15','0987654321','Đang thuê','61DE95DF73EEF4B7C0F19F9FF49BB707','nguyenvanb','matkhau2'),
 ('EBFF48CF61E0EBAEDE3E4EB9C21CFC29','Tran Thi C','123456789013','Hai Phong','1993-03-20','0987654322','Đang thuê','472A9121AFDBDBF23B15D3C778332BBF','tranthic','matkhau3'),
 ('B3CD8EE2B3FAAF6043078A17CFF88B44','Le Van D','123456789014','Nam Dinh','1990-02-10','0987654323','Đã rời đi','53BBFAA6EF5163CF02DB9AB4A82D660A','levand','matkhau4'),
 ('F1A6B79BD6A5E532BCC6257201C0DCB6','Pham Thi E','123456789015','Da Nang','1992-04-25','0987654324','Tạm vắng','472A9121AFDBDBF23B15D3C778332BBF','phamthie','matkhau5'),
 ('17735E9AB006A5865377BEF234BCDC21','Hoang Van F','123456789016','Hue','1991-01-30','0987654325','Đang thuê','F5D5DB511DBC5408509EC794E0E35050','hoangvanf','matkhau6');
INSERT INTO "Phong" ("ID","TenPhong","SoNguoiToiDa","DienTich","GiaThue","DichVu","TrangThai","MaKhuTro") VALUES ('472A9121AFDBDBF23B15D3C778332BBF','Phong 101',2,20.5,'3000000','Điều hòa, WiFi miễn phí','Trống','081D5D2E802921846FE71CC7F41BB496'),
 ('61DE95DF73EEF4B7C0F19F9FF49BB707','Phong 102',3,25.0,'4000000','Điều hòa, Máy giặt','Đã thuê','081D5D2E802921846FE71CC7F41BB496'),
 ('53BBFAA6EF5163CF02DB9AB4A82D660A','Phong 103',1,15.0,'2500000','WiFi miễn phí','Đang sửa chữa','1545D78BD219EEF76CB04B495DCA2CC6'),
 ('AE777C58A066037639F54025F92F56E0','Phong 104',4,30.0,'5000000','Điều hòa, Nhà bếp','Trống','1545D78BD219EEF76CB04B495DCA2CC6'),
 ('F5D5DB511DBC5408509EC794E0E35050','Phong 105',2,18.5,'3500000','Máy giặt, WiFi miễn phí','Đặt cọc','A7599DAEE2CF8F99B29D9A4A6939A37C');
INSERT INTO "QuyDinh" ("ID","TieuDe","NoiDung","NgayTao","MaKhuTro","TrangThai") VALUES ('B09D9470F0F81186F8E337BAEDA237A6','Quy định 1','Nội dung quy định 1','2023-01-01 09:00:00','081D5D2E802921846FE71CC7F41BB496',1),
 ('5B91E15E83F52316666F369EB0E42BA0','Quy định 2','Nội dung quy định 2','2023-02-01 09:30:00','1545D78BD219EEF76CB04B495DCA2CC6',1);
INSERT INTO "ThongBao" ("ID","TieuDe","NoiDung","NgayTao","MaKhuTro","MaPhong","DaDoc") VALUES ('118424183BBC8A682049B1536245D522','Thông báo 1','Nội dung thông báo 1','2023-01-01 10:00:00','081D5D2E802921846FE71CC7F41BB496','472A9121AFDBDBF23B15D3C778332BBF',0),
 ('A6B7346BB41F4CEC3EFBA6869031B6F2','Thông báo 2','Nội dung thông báo 2','2023-02-01 11:00:00','1545D78BD219EEF76CB04B495DCA2CC6',NULL,0);
COMMIT;
